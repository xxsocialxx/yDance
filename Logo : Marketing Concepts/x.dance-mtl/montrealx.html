<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>x.dance // MONTREAL</title>
    <meta name="description" content="x.dance: Operational Protocol for Montreal Dance Access. Your comprehensive resource to locate 'the dance' in Montreal.">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='50%25' y='50%25' font-size='80' text-anchor='middle' dominant-baseline='central'%3Ex%3C/text%3E%3C/svg%3E" type="image/svg+xml">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;700&display=swap');

        :root {
            --bg-color: #000000;
            --text-color: #F0F0F0;
            --terminal-border: #1a1a1a;
            --terminal-glow: #00ff66; /* Subtle green for terminal elements */
            --x-inner-color: #FFFFFF;
            --x-border-color: #000000;
            --selected-day-bg: rgba(0, 255, 102, 0.2); /* Highlight for selected day */
            --today-mark-color: yellow; /* Mark for "today" specifically */
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'IBM Plex Mono', monospace; /* Primary font for terminal feel */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- Fixed Header Section --- */
        .header-fixed {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: var(--bg-color);
            z-index: 1000; /* Ensure it stays on top */
            padding: 20px 0; /* Vertical padding */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); /* Subtle shadow for fixed header */
            text-align: center;
            border-bottom: 1px solid var(--terminal-border); /* Subtle separator */
            box-sizing: border-box; /* Include padding in width */
            
            /* Apply the industrial glow ONLY to this header section */
            border: 1px solid var(--terminal-border); /* Main border */
            box-shadow: 0 0 10px rgba(0, 255, 102, 0.1), inset 0 0 10px rgba(0, 255, 102, 0.1);
            animation: industrialGlow 5s infinite alternate ease-in-out;
        }

        @keyframes industrialGlow {
            0% { box-shadow: 0 0 10px rgba(0, 255, 102, 0.1), inset 0 0 10px rgba(0, 255, 102, 0.1); }
            50% { box-shadow: 0 0 15px rgba(0, 255, 102, 0.2), inset 0 0 15px rgba(0, 255, 102, 0.2); }
            100% { box-shadow: 0 0 10px rgba(0, 255, 102, 0.1), inset 0 0 10px rgba(0, 255, 102, 0.1); }
        }

        /* --- X Logo Styling (Copied from index.html) --- */
        .x-logo {
            font-family: 'Rajdhani', sans-serif;
            font-size: 5em; /* Slightly smaller for header, but still prominent */
            font-weight: 700;
            line-height: 0.8;
            position: relative;
            display: inline-block;
            text-align: center;
            width: 1em;
            height: 1em;
            overflow: hidden;
            animation: xFightBack 6s infinite ease-in-out;
            margin-bottom: 10px; /* Space below logo */
        }

        .x-logo::before {
            content: 'x';
            color: var(--x-inner-color);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .x-logo::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #FF00FF, #00FFFF, #FFFF00);
            opacity: 0;
            z-index: 1;
            transition: opacity 0.5s ease-out;
        }

        @keyframes xFightBack {
            0%, 100% { opacity: 1; filter: grayscale(0); }
            20% { opacity: 1; filter: grayscale(1); }
            25% { opacity: 0.5; filter: grayscale(0); }
            30% { opacity: 1; filter: grayscale(1); }
            70% { opacity: 1; filter: grayscale(1); }
            75% { opacity: 0.5; filter: grayscale(0); }
            80% { opacity: 1; filter: grayscale(1); }
        }

        /* --- Page Title / Subtitle --- */
        .page-title {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 1.8em;
            color: var(--text-color);
            margin-bottom: 20px;
            letter-spacing: 0.05em;
        }
        .page-title span { /* For the city name glow */
            color: var(--terminal-glow);
            text-shadow: 0 0 5px var(--terminal-glow);
        }

        /* --- Date Bar --- */
        .date-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
            max-width: 600px;
            padding: 10px 0;
            font-size: 0.9em;
        }

        .date-bar .day-option {
            padding: 8px 15px;
            margin: 0 5px;
            border: 1px solid var(--terminal-border);
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            color: var(--text-color);
            position: relative; /* For the 'today' mark */
            user-select: none; /* Prevent text selection */
        }

        .date-bar .day-option:hover {
            background-color: var(--selected-day-bg);
            box-shadow: 0 0 8px rgba(0, 255, 102, 0.4);
            color: var(--terminal-glow);
        }

        .date-bar .day-option.selected {
            background-color: var(--selected-day-bg);
            border-color: var(--terminal-glow);
            box-shadow: 0 0 10px rgba(0, 255, 102, 0.6);
            color: var(--terminal-glow);
        }

        .date-bar .day-option.is-today::after {
            content: '*'; /* A simple mark for 'today' */
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 0.8em;
            color: var(--today-mark-color);
        }

        .date-bar .date-dropdown {
            background-color: var(--bg-color);
            border: 1px solid var(--terminal-glow);
            color: var(--terminal-glow);
            font-family: 'IBM Plex Mono', monospace;
            font-size: 1em;
            padding: 5px 10px;
            margin-left: 20px; /* Space from day options */
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            cursor: pointer;
            outline: none;
            box-shadow: 0 0 5px rgba(0, 255, 102, 0.3);
            transition: all 0.3s ease-in-out;
        }

        .date-bar .date-dropdown option {
            background-color: var(--bg-color);
            color: var(--terminal-glow);
        }

        .date-bar .date-dropdown:hover,
        .date-bar .date-dropdown:focus {
            box-shadow: 0 0 10px rgba(0, 255, 102, 0.6);
        }

        /* --- Main Content Area --- */
        .main-content {
            margin-top: 250px; /* Adjust this value to be below your fixed header */
            padding: 40px 20px;
            width: 90%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            box-sizing: border-box;
            color: var(--text-color);
            font-size: 0.9em;
            line-height: 1.8; /* More space for readability */
        }

        .section-heading {
            font-size: 1.4em;
            color: var(--terminal-glow);
            text-shadow: 0 0 5px var(--terminal-glow);
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--terminal-border); /* Subtle divider */
            padding-bottom: 5px;
            letter-spacing: 0.03em;
        }

        .event-listing {
            margin-bottom: 25px; /* Space between events */
            padding: 10px 0;
            border-bottom: 1px dotted rgba(240, 240, 240, 0.1); /* Very subtle separator */
        }

        .event-listing:last-child {
            border-bottom: none; /* No border for the last one */
        }

        .event-listing .time {
            color: var(--terminal-glow);
            font-weight: bold;
            margin-right: 10px;
        }

        .event-listing .type, .event-listing .location {
            color: var(--text-color);
        }
        
        .event-listing .status {
            color: var(--today-mark-color); /* Use yellow for active status */
            margin-left: 10px;
            font-weight: bold;
        }

        .event-listing .details-link {
            color: var(--terminal-glow);
            text-decoration: none;
            margin-left: 15px;
            white-space: nowrap; /* Keep link on one line */
        }
        .event-listing .details-link:hover {
            text-decoration: underline;
        }

        /* --- End of Content Marker --- */
        .end-marker {
            text-align: center;
            margin-top: 80px;
            margin-bottom: 100px; /* Space at bottom to ensure it's visible */
            color: rgba(240, 240, 240, 0.4);
            font-size: 0.8em;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .x-logo {
                font-size: 3.5em; /* Smaller on mobile */
            }
            .page-title {
                font-size: 1.4em;
            }
            .date-bar {
                flex-wrap: wrap; /* Allow wrapping on smaller screens */
                justify-content: center;
                font-size: 0.8em;
            }
            .date-bar .day-option {
                padding: 6px 10px;
                margin: 5px;
            }
            .date-bar .date-dropdown {
                margin-left: 0;
                margin-top: 10px;
                width: 80%;
            }
            .main-content {
                margin-top: 220px; /* Adjust for potentially smaller fixed header on mobile */
                padding: 20px 10px;
                font-size: 0.8em;
            }
            .section-heading {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="header-fixed">
        <div class="x-logo"></div>
        <h1 class="page-title">x.dance // <span>MONTREAL</span></h1>
        <div class="date-bar" id="date-bar">
            <!-- Day options will be generated here by JavaScript -->
        </div>
    </div>

    <div class="main-content" id="main-content">
        <!-- Content will be dynamically loaded/filtered here -->
        <h2 class="section-heading">DANCES TODAY</h2>

        <div class="events-list" id="events-list">
            <!-- Mock event listings will go here -->
            <div class="event-listing">
                <span class="time">22:00</span>
                <span class="type">[TECHNO_INDUSTRIAL]</span>
                <span class="location">Concrete Factory</span>
                <span class="status">[ACTIVE]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">23:30</span>
                <span class="type">[ACID_HOUSE]</span>
                <span class="location">Underground Warehouse X</span>
                <span class="status">[ACTIVE]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">21:00</span>
                <span class="type">[DEEP_MINIMAL]</span>
                <span class="location">The Sound Chamber</span>
                <span class="status">[ENDED]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">00:00</span>
                <span class="type">[BREAKBEAT_NIGHT]</span>
                <span class="location">Lost Alley Club</span>
                <span class="status">[CANCELLED]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">20:00</span>
                <span class="type">[HOUSE_GROOVE]</span>
                <span class="location">Rooftop Garden</span>
                <span class="status">[SOLD_OUT]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">22:00</span>
                <span class="type">[TECHNO_INDUSTRIAL]</span>
                <span class="location">Concrete Factory</span>
                <span class="status">[ACTIVE]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">23:30</span>
                <span class="type">[ACID_HOUSE]</span>
                <span class="location">Underground Warehouse X</span>
                <span class="status">[ACTIVE]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">21:00</span>
                <span class="type">[DEEP_MINIMAL]</span>
                <span class="location">The Sound Chamber</span>
                <span class="status">[ENDED]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">00:00</span>
                <span class="type">[BREAKBEAT_NIGHT]</span>
                <span class="location">Lost Alley Club</span>
                <span class="status">[CANCELLED]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
            <div class="event-listing">
                <span class="time">20:00</span>
                <span class="type">[HOUSE_GROOVE]</span>
                <span class="location">Rooftop Garden</span>
                <span class="status">[SOLD_OUT]</span>
                <a href="#" class="details-link">[PROTOCOL_DETAILS]</a>
            </div>
        </div>

        <div class="end-marker">
            &lt;END OF DANCE LOG&gt;
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const dateBar = document.getElementById('date-bar');
            const eventsList = document.getElementById('events-list');
            const sectionHeading = document.querySelector('.section-heading'); // Assuming it's the only one for now

            const daysOfWeek = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
            const monthNames = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];

            let today = new Date(); // Represents the actual current day
            let currentSelectedDate = new Date(today); // Represents the date currently displayed

            function formatDateToDDMM(date) {
                const day = String(date.getDate()).padStart(2, '0');
                const month = monthNames[date.getMonth()];
                return `${day} ${month}`;
            }

            function updateDateBar() {
                dateBar.innerHTML = ''; // Clear existing days

                let tempDate = new Date(currentSelectedDate);
                // Adjust tempDate to show 2 days before currentSelectedDate (if possible) for better context
                // No, sticking to the requested format: TODAY + FRI/SAT/SUN
                
                // For the "Today, Friday, Saturday, Sunday" display
                let currentDayName = daysOfWeek[today.getDay()];
                let currentDayDate = today.getDate(); // Actual day of month for "today"

                const displayDays = [
                    { label: 'TODAY', date: new Date(today) },
                    { label: 'FRI', date: new Date(today) }, // Placeholder, will be adjusted
                    { label: 'SAT', date: new Date(today) }, // Placeholder, will be adjusted
                    { label: 'SUN', date: new Date(today) }  // Placeholder, will be adjusted
                ];

                // Dynamically find Friday, Saturday, Sunday relative to today
                let pointerDate = new Date(today);
                for (let i = 1; i < displayDays.length; i++) {
                    do {
                        pointerDate.setDate(pointerDate.getDate() + 1);
                    } while (daysOfWeek[pointerDate.getDay()] !== displayDays[i].label);
                    displayDays[i].date = new Date(pointerDate); // Clone the date
                }

                // Create the day options
                displayDays.forEach(dayInfo => {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'day-option';
                    
                    const dayLabel = dayInfo.label;
                    const displayDate = formatDateToDDMM(dayInfo.date);
                    
                    dayElement.textContent = `${dayLabel} (${displayDate})`;
                    dayElement.dataset.fullDate = dayInfo.date.toISOString().split('T')[0]; // Store full date for filtering

                    // Highlight 'TODAY' if it matches the currentSelectedDate being displayed
                    if (currentSelectedDate.toDateString() === dayInfo.date.toDateString()) {
                        dayElement.classList.add('selected');
                    }

                    // Mark if it's the actual current calendar day
                    if (today.toDateString() === dayInfo.date.toDateString()) {
                        dayElement.classList.add('is-today');
                    }

                    dayElement.addEventListener('click', () => {
                        currentSelectedDate = new Date(dayInfo.date);
                        updateDateBar();
                        // For now, just log. In future, filter events based on currentSelectedDate
                        console.log(`Displaying dances for: ${currentSelectedDate.toDateString()}`);
                        updateEventsDisplay();
                    });
                    dateBar.appendChild(dayElement);
                });

                // Create the future dates dropdown
                const futureDropdown = document.createElement('select');
                futureDropdown.className = 'date-dropdown';
                futureDropdown.id = 'future-date-dropdown';
                let defaultOption = document.createElement('option');
                defaultOption.value = "";
                defaultOption.textContent = "Future Dates...";
                defaultOption.disabled = true;
                defaultOption.selected = true;
                futureDropdown.appendChild(defaultOption);

                // Add next 30 days to the dropdown
                let futureDate = new Date(today);
                for (let i = 0; i < 30; i++) { // Max 30 future days for now
                    futureDate.setDate(futureDate.getDate() + 1); // Increment day
                    const option = document.createElement('option');
                    option.value = futureDate.toISOString().split('T')[0];
                    option.textContent = `${daysOfWeek[futureDate.getDay()]} (${formatDateToDDMM(futureDate)})`;
                    futureDropdown.appendChild(option);
                }

                futureDropdown.addEventListener('change', function() {
                    const selectedDateValue = this.value;
                    if (selectedDateValue) {
                        currentSelectedDate = new Date(selectedDateValue);
                        updateDateBar(); // Re-render date bar to highlight new selection
                        console.log(`Displaying dances for: ${currentSelectedDate.toDateString()}`);
                        updateEventsDisplay(); // Update event listings
                        this.value = ""; // Reset dropdown to default after selection
                    }
                });
                dateBar.appendChild(futureDropdown);
            }

            function updateEventsDisplay() {
                // This is where you would filter actual events based on `currentSelectedDate`
                // For now, we'll just update the heading to reflect the selected date.
                
                const selectedDateStr = currentSelectedDate.toDateString();
                let headingText = `DANCES for ${daysOfWeek[currentSelectedDate.getDay()]} (${formatDateToDDMM(currentSelectedDate)})`;

                if (currentSelectedDate.toDateString() === today.toDateString()) {
                    headingText = 'DANCES TODAY';
                }

                sectionHeading.textContent = headingText;

                // Placeholder for actual content filtering
                // In a real app, you'd fetch/filter data here and re-render eventsList.innerHTML
            }


            // Initial load
            updateDateBar();
            updateEventsDisplay();
        });
    </script>
</body>
</html>