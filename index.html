<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yDance Events</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="yDance">
</head>
<body>
    <div id="app">
        <!-- Tab Navigation -->
        <nav class="tab-navigation" id="tab-navigation">
            <div class="tab-container">
                <button class="tab-button active" data-tab="events" id="tab-events">
                    <span class="tab-label">Events</span>
                </button>
                <button class="tab-button" data-tab="djs" id="tab-djs">
                    <span class="tab-label">DJs</span>
                </button>
                <button class="tab-button" data-tab="venues" id="tab-venues">
                    <span class="tab-label">Venues</span>
                </button>
                <button class="tab-button" data-tab="sound-systems" id="tab-sound-systems">
                    <span class="tab-label">Sound Systems</span>
                </button>
                <button class="tab-button" data-tab="friends" id="tab-friends">
                    <span class="tab-label">Friends</span>
                </button>
                <button class="tab-button" data-tab="social" id="tab-social">
                    <span class="tab-label">Social</span>
                </button>
                <button class="nostr-refresh-button" id="nostr-refresh-btn" title="Refresh Nostr Data">
                    <span class="refresh-icon">‚Üª</span>
                </button>
            </div>
            
            <!-- Auth Status Bar -->
            <div class="auth-status-bar" id="auth-status-bar">
                <div class="auth-info" id="auth-info">
                    <span class="auth-status" id="auth-status">Not signed in</span>
                    <span class="auth-user" id="auth-user" style="display: none;"></span>
                </div>
                <div class="auth-actions" id="auth-actions">
                    <button class="auth-button" id="login-btn">Login</button>
                    <button class="auth-button" id="signup-btn">Sign Up</button>
                    <button class="auth-button" id="logout-btn" style="display: none;">Logout</button>
                </div>
            </div>
        </nav>
        
        <!-- Events View -->
        <div class="events-view" id="events-view">
            <div class="view-header">
                <h2>yDance Events</h2>
            </div>
            <div class="events-container" id="events-container">
                <!-- Events will be loaded here dynamically -->
            </div>
        </div>
        
        <!-- DJ Profiles View -->
        <div class="dj-view" id="dj-view" style="display: none;">
            <div class="view-header">
                <button id="back-to-events" class="back-button">‚Üê Back to Events</button>
                <h2>DJ Profiles</h2>
            </div>
            <div class="dj-profiles-container" id="dj-profiles-container">
                <!-- DJ profiles will be loaded here when needed -->
            </div>
        </div>
        
        <!-- Individual DJ Profile View -->
        <div class="dj-profile-view" id="dj-profile-view" style="display: none;">
            <div class="view-header">
                <button id="back-to-dj-list" class="back-button">‚Üê Back to DJs</button>
                <h2 id="dj-profile-title">DJ Profile</h2>
            </div>
            <div class="dj-profile-container" id="dj-profile-container">
                <!-- Individual DJ profile will be loaded here -->
            </div>
        </div>
        
        <!-- Individual Event Details View -->
        <div class="event-details-view" id="event-details-view" style="display: none;">
            <div class="view-header">
                <button id="back-to-events-list" class="back-button">‚Üê Back to Events</button>
                <h2 id="event-details-title">Event Details</h2>
            </div>
            <div class="event-details-container" id="event-details-container">
                <!-- Individual event details will be loaded here -->
            </div>
        </div>
        
        <!-- Individual Venue Details View -->
        <div class="venue-details-view" id="venue-details-view" style="display: none;">
            <div class="view-header">
                <button id="back-to-venues" class="back-button">‚Üê Back to Venues</button>
                <h2 id="venue-details-title">Venue Details</h2>
            </div>
            <div class="venue-details-container" id="venue-details-container">
                <!-- Individual venue details will be loaded here -->
            </div>
        </div>
        
        <!-- Individual Sound System Details View -->
        <div class="sound-system-details-view" id="sound-system-details-view" style="display: none;">
            <div class="view-header">
                <button id="back-to-sound-systems" class="back-button">‚Üê Back to Sound Systems</button>
                <h2 id="sound-system-details-title">Sound System Details</h2>
            </div>
            <div class="sound-system-details-container" id="sound-system-details-container">
                <!-- Individual sound system details will be loaded here -->
            </div>
        </div>
        
        <!-- Individual Friend Profile View -->
        <div class="friend-profile-view" id="friend-profile-view" style="display: none;">
            <div class="view-header">
                <button id="back-to-friends" class="back-button">‚Üê Back to Friends</button>
                <h2 id="friend-profile-title">Friend Profile</h2>
            </div>
            <div class="friend-profile-container" id="friend-profile-container">
                <!-- Individual friend profile will be loaded here -->
            </div>
        </div>
        
        <!-- Venues View -->
        <div class="venues-view" id="venues-view" style="display: none;">
            <div class="view-header">
                <h2>Venues</h2>
            </div>
            <div class="venues-container" id="venues-container">
                <!-- Venues will be loaded here when implemented -->
                <p class="coming-soon">Coming Soon - Venue listings</p>
            </div>
        </div>
        
        <!-- Sound Systems View -->
        <div class="sound-systems-view" id="sound-systems-view" style="display: none;">
            <div class="view-header">
                <h2>Sound Systems</h2>
            </div>
            <div class="sound-systems-container" id="sound-systems-container">
                <!-- Sound systems will be loaded here when implemented -->
                <p class="coming-soon">Coming Soon - Sound system listings</p>
            </div>
        </div>
        
        <!-- Friends View -->
        <div class="friends-view" id="friends-view" style="display: none;">
            <div class="view-header">
                <h2>Friends</h2>
            </div>
            <div class="friends-container" id="friends-container">
                <!-- Friends-based events will be loaded here when implemented -->
                <p class="coming-soon">Coming Soon - Social event discovery</p>
            </div>
        </div>
        
        <!-- Social View -->
        <div class="social-view" id="social-view" style="display: none;">
            <div class="view-header">
                <h2>Social Feed</h2>
            </div>
            
            <!-- Message Input -->
            <div class="message-input-container">
                <textarea id="message-input" placeholder="Share an event, mention a DJ, or post about the scene..." rows="3"></textarea>
                <button id="send-message" class="send-button">Send</button>
            </div>
            
            <!-- Social Feed -->
            <div class="social-feed-container" id="social-feed-container">
                <!-- Social messages will be loaded here -->
            </div>
        </div>
        
        <!-- Auth Modal -->
        <div class="auth-modal" id="auth-modal" style="display: none;">
            <div class="auth-modal-content">
                <div class="auth-modal-header">
                    <h3 id="auth-modal-title">Login</h3>
                    <button class="auth-modal-close" id="auth-modal-close">&times;</button>
                </div>
                <div class="auth-modal-body">
                    <!-- Account Mode Selection (Sign Up Only) -->
                    <div class="account-mode-selection" id="account-mode-selection" style="display: none;">
                        <h4>Choose Your Security Level</h4>
                        <div class="mode-options">
                            <div class="mode-option" data-mode="light">
                                <div class="mode-header">
                                    <span class="mode-icon">üí°</span>
                                    <span class="mode-title">Light Mode</span>
                                </div>
                                <div class="mode-description">
                                    <p><strong>Standard Security</strong></p>
                                    <ul>
                                        <li>Email link authentication</li>
                                        <li>Standard password recovery</li>
                                        <li>Familiar web app experience</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="mode-option" data-mode="bold">
                                <div class="mode-header">
                                    <span class="mode-icon">üîê</span>
                                    <span class="mode-title">Bold Mode</span>
                                </div>
                                <div class="mode-description">
                                    <p><strong>Maximum Security</strong></p>
                                    <ul>
                                        <li>Password + recovery phrase</li>
                                        <li>Cryptocurrency-grade security</li>
                                        <li>No password reset possible</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="mode-warning" id="mode-warning" style="display: none;">
                            <div class="warning-icon">‚ö†Ô∏è</div>
                            <div class="warning-content">
                                <h5>Important Security Notice</h5>
                                <p>In Bold Mode, account recovery requires:</p>
                                <ul>
                                    <li>Access to your email</li>
                                    <li>Your recovery phrase (12 words)</li>
                                </ul>
                                <p><strong>We cannot recover your account without both.</strong></p>
                            </div>
                        </div>
                    </div>

                    <!-- Authentication Form -->
                    <form id="auth-form">
                        <div class="auth-form-group">
                            <label for="auth-email">Email:</label>
                            <input type="email" id="auth-email" required>
                        </div>
                        <div class="auth-form-group" id="password-group">
                            <label for="auth-password">Password:</label>
                            <input type="password" id="auth-password" required>
                        </div>
                        <div class="auth-form-group" id="recovery-phrase-group" style="display: none;">
                            <label for="auth-recovery-phrase">Recovery Phrase (12 words):</label>
                            <textarea id="auth-recovery-phrase" placeholder="Enter your 12-word recovery phrase..." rows="2"></textarea>
                        </div>
                        <div class="auth-form-actions">
                            <button type="submit" id="auth-submit-btn">Login</button>
                            <button type="button" id="auth-cancel-btn">Cancel</button>
                        </div>
                    </form>
                    <div class="auth-switch">
                        <span id="auth-switch-text">Don't have an account?</span>
                        <button type="button" id="auth-switch-btn">Sign Up</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
        <!-- Location Selection Modal -->
        <div class="location-modal" id="location-modal" style="display: none;">
            <div class="location-modal-content">
                <div class="location-prompt">
                    <p class="location-prompt-text">> SELECT CITY:</p>
                    <select class="location-dropdown" id="location-dropdown">
                        <option value="">-- select city --</option>
                        <option value="amsterdam">Amsterdam</option>
                        <option value="barcelona">Barcelona</option>
                        <option value="berlin">Berlin</option>
                        <option value="london">London</option>
                        <option value="los-angeles">Los Angeles</option>
                        <option value="madrid">Madrid</option>
                        <option value="melbourne">Melbourne</option>
                        <option value="mexico-city">Mexico City</option>
                        <option value="montreal">Montreal</option>
                        <option value="new-york">New York</option>
                        <option value="paris">Paris</option>
                        <option value="rome">Rome</option>
                        <option value="sao-paulo">S√£o Paulo</option>
                        <option value="sydney">Sydney</option>
                        <option value="tokyo">Tokyo</option>
                        <option value="toronto">Toronto</option>
                        <option value="vancouver">Vancouver</option>
                    </select>
                    <button class="location-select-button" id="location-select-btn">[SELECT]</button>
                </div>
            </div>
        </div>
    
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/nostr-tools@2.0.0/dist/nostr-tools.umd.js"></script>
    <script>
        // Make nostr-tools available globally
        window.nostrTools = window.nostrTools || window.nostr;
    </script>
    <script src="script.js"></script>
</body>
</html>
